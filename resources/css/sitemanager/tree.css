/* SortableJS 스타일 */
.sortable-tree { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; position: relative; }

@media (min-width:768px) {
    .sortable-tree { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
}

@media (min-width:992px) {
    .sortable-tree { grid-template-columns: repeat(3, 1fr); }
}

@media (min-width:2000px) {
    .sortable-tree { grid-template-columns: repeat(4, 1fr); }
}

@media (min-width:2600px) {
    .sortable-tree { grid-template-columns: repeat(5, 1fr); }
}

.menu-item { background: white; border: 1px solid rgba(0, 0, 0, 0.176); border-radius: 8px; margin: 4px 0; padding: 0.5rem 1rem; cursor: grab; transition: all 0.2s ease; box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: relative; user-select: none; }
#menu-tree > .menu-item { margin: 0; }
.menu-item:hover { border-color: #007bff; box-shadow: 0 2px 8px rgba(0,123,255,0.15); transform: translateY(-1px); }
.menu-item.sortable-ghost { opacity: 0.3; background: #f8f9fa; border: 2px dashed #007bff; transform: none; }
.menu-item.sortable-chosen { cursor: grabbing; opacity: 0.9; background: #e3f2fd; border-color: #2196f3; box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3); transform: scale(1.02); z-index: 1000; }
.menu-item.sortable-drag { opacity: 0.9; background: #e3f2fd; border-color: #2196f3; box-shadow: 0 8px 20px rgba(33, 150, 243, 0.4); transform: scale(1.05); z-index: 1000; }

.menu-children { margin-left: 1rem; margin-top: 8px; }
.menu-children.empty { display: none; }

.sortable-tree > .menu-item { padding: 0; }
.sortable-tree > .menu-item > .menu-content { border-bottom: solid 1px rgba(0, 0, 0, 0.176); background-color: rgba(33, 37, 41, 0.03); padding: 0.5rem 1rem; }
.sortable-tree > .menu-item > .menu-children { margin-left: 0; margin-top: 0; padding: 0.5rem 0.5rem; }

.menu-content { display: flex; justify-content: space-between; align-items: center; }
.menu-content .menu-thumbnail { margin-right: 0.25rem; }
.menu-content .bi { margin-right: 0.25rem; }
.menu-content .target { color: var(--bs-gray-600); font-size: 0.7rem; }
.menu-content .target .bi-exclamation-triangle { font-size: 0.8rem; margin-left: 0.25rem; cursor: help; }
.menu-content .target .bi-exclamation-triangle:hover { color: #ffc107 !important; }

.menu-title-wrapper { display: flex; align-items: center; flex-grow: 1; }
.menu-title { font-weight: 600; color: #333; cursor: pointer; }
.menu-title:hover { color: #007bff; text-decoration: underline; }

/* Hidden 메뉴 스타일 */
.menu-item.menu-hidden { opacity: 0.3; position: relative; }
.menu-item.menu-hidden::after { content: "HIDDEN"; position: absolute; top: 0; right: 0; font-size: 0.6rem; color: #6c757d; background: rgba(108, 117, 125, 0.1); padding: 1px 4px; border-radius: 2px; font-weight: 500; }
.menu-item.menu-hidden .menu-title { color: #6c757d; }
.menu-item.menu-hidden:hover { opacity: 0.8; }

/* 접근 불가 메뉴 스타일 (List 권한 없음) */
.menu-item.menu-no-access { position: relative; border-color: #dc3545; }
.menu-item.menu-no-access::after { content: "NO ACCESS"; position: absolute; top: 0; right: 0; font-size: 0.6rem; color: #dc3545; background: rgba(220, 53, 69, 0.1); padding: 1px 4px; border-radius: 2px; font-weight: 500; }
.menu-item.menu-no-access .menu-title { color: #dc3545; text-decoration: line-through; }
.menu-item.menu-no-access:hover { opacity: 0.6; }

/* Hidden이면서 접근 불가인 경우 */
.menu-item.menu-hidden.menu-no-access::after { content: "HIDDEN • NO ACCESS"; color: #dc3545; }

/* 드롭 인디케이터 */
.sortable-drop-indicator { height: 3px; background: #28a745; border-radius: 2px; margin: 2px 0; opacity: 0; transition: opacity 0.2s; }
.sortable-drop-indicator.active { opacity: 1; }

/* Command 모드 스타일 - 드래그 중에만 활성화 */
.dragging.command-mode { cursor: copy !important; }

/* Command 모드에서 다른 메뉴들 완전히 고정 */
.dragging.command-mode .menu-item:not(.sortable-chosen) { position: relative; transition: all 0.2s ease; pointer-events: none; }
.dragging.command-mode .menu-item:not(.sortable-chosen):hover { background: rgba(40, 167, 69, 0.1); border: 2px dashed #28a745; border-radius: 4px; transform: scale(1.02); pointer-events: auto; }

/* Command 모드에서 SortableJS 완전 비활성화 */
.dragging.command-mode .sortable-tree,
.dragging.command-mode .menu-children { user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }

/* 드래그 중인 아이템은 예외 */
.dragging.command-mode .sortable-chosen { pointer-events: auto; z-index: 9999; }

/* Menu Legend Styles */
.legend-sample { 
    font-size: 0.7rem; 
    padding: 1px 6px; 
    border-radius: 3px; 
    font-weight: 500;
    border: 1px solid #dee2e6;
}

.menu-legend-hidden .legend-sample { 
    opacity: 0.3; 
    color: #6c757d; 
    background: rgba(108, 117, 125, 0.1);
}

.menu-legend-no-access .legend-sample { 
    opacity: 0.4; 
    color: #dc3545; 
    text-decoration: line-through;
    border-color: #dc3545;
    background: rgba(220, 53, 69, 0.1);
}